<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <link type="text/css" rel="stylesheet" 
              href="/StarTrekRescueExpansion/css/padrao.css" />
        <title>Star Trek Rescue Expansion Pack</title>
    </h:head>    
    <h:body onload="#{StarTrekRescueExpansion.startSearch()}" class="fundo">
        <center>
            <h1 class="titulo">Bem vindo ao Star Trek Rescue Expansion Pack!</h1>            
            <h2 class="texto">Encontre os #{StarTrekRescueExpansion.num_tripulantes} tripulantes perdidos...</h2>            
            <h:form id="formPlaneta"> 
                <h:panelGrid columns="3" style="margin-bottom:10px" cellpadding="5">
                    <p:outputLabel for="dificuldade" value="Dificuldade:" class="texto-padrao"/>
                    <p:selectOneMenu id="dificuldade" value="#{StarTrekRescueExpansion.dificuldadeSelected}" style="width:125px">
                        <f:selectItem itemLabel="F&aacute;cil" itemValue="0" />
                        <f:selectItem itemLabel="Dif&iacute;cil" itemValue="1" />
                    </p:selectOneMenu>
                    <p:commandButton value="Reiniciar" update="formPlaneta" oncomplete="#{StarTrekRescueExpansion.startSearch()}" />
                </h:panelGrid>                                               
                <p:panel id="panelPlaneta" class="panel">
                    <p:dialog header="Fim da busca!" widgetVar="dialogFim" modal="true" height="100">
                        <h:outputText value="Voc&ecirc; encontrou todos os tripulantes com #{StarTrekRescueExpansion.tentativas} sinalizadores!" />
                    </p:dialog>
                    <table class="tabela">                    
                        <c:forEach var="linha" begin="0" end="#{StarTrekRescueExpansion.linhas - 1}">                        
                            <tr>
                                <c:forEach var="coluna" begin="0" end="#{StarTrekRescueExpansion.colunas - 1}">
                                    <td width="40" height="40" align="center">                                        
                                        <c:if test="#{StarTrekRescueExpansion.planeta[linha][coluna] == -1}">                                            
                                            <p:commandLink action="#{StarTrekRescueExpansion.searchTripulantes(linha, coluna)}" update="panelPlaneta">
                                                <h:graphicImage value="/img/agua.gif" class="imagem" />
                                            </p:commandLink>                                            
                                        </c:if>                                                                            
                                        <c:if test="#{StarTrekRescueExpansion.planeta[linha][coluna] == 0}">
                                            <p:commandLink>
                                                <h:graphicImage value="/img/none.png" class="imagem-padrao" />
                                            </p:commandLink>                                            
                                        </c:if>
                                        <c:if test="#{StarTrekRescueExpansion.planeta[linha][coluna] == 3}">
                                            <p:commandLink>
                                                <h:graphicImage value="/img/none.png" class="imagem-padrao" />
                                            </p:commandLink>                                            
                                        </c:if>
                                        <c:if test="#{StarTrekRescueExpansion.planeta[linha][coluna] == 1}">
                                            <p:commandLink>
                                                <h:graphicImage value="/img/soldado.png" class="imagem-padrao" />
                                            </p:commandLink>                                            
                                        </c:if>                                        
                                        <c:if test="#{StarTrekRescueExpansion.planeta[linha][coluna] == 2}">
                                            <p:commandLink action="#{StarTrekRescueExpansion.searchTripulantes(linha, coluna)}" update="panelPlaneta">
                                                <h:graphicImage value="/img/warning.png" class="imagem-padrao" />
                                            </p:commandLink>                                            
                                        </c:if>
                                    </td>
                                </c:forEach>
                            </tr>
                        </c:forEach>                         
                    </table>                    
                    <h2 class="texto-padrao">Voc&ecirc; encontrou #{StarTrekRescueExpansion.acertos} tripulantes com ${StarTrekRescueExpansion.tentativas} sinalizadores.</h2>
                </p:panel>                
            </h:form>
        </center>
    </h:body>
</html>

